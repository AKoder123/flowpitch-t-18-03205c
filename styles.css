/* =========================
   FlowPitch â€” Styles
   ========================= */
:root {
  --brand: #4da3ff;
  --brand-2: #67d1ff;
  --bg: #050611;
  --ink: #e8ecff;
  --muted: #9fb0ff;
  --card: rgba(255,255,255,0.06);
  --border: rgba(255,255,255,0.14);
  --glow: 0 10px 30px rgba(77,163,255,0.25);
  --radius: 16px;
  --base: clamp(15px, 2.2vh, 18px);
  --h1: clamp(38px, 6.4vh, 72px);
  --h2: clamp(28px, 4.4vh, 42px);
  --h3: clamp(20px, 3.2vh, 28px);
  --topOffset: 64px; /* set in JS */
}

@media (max-height: 740px) {
  :root { --base: clamp(14px, 1.9vh, 16px); --h1: clamp(32px, 5.2vh, 56px); --h2: clamp(24px, 3.8vh, 34px); --h3: clamp(18px, 2.6vh, 24px); }
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--ink);
  background: var(--bg);
  line-height: 1.35;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Background artistry */
.bg { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
.bg .bg-layer.gradient { position:absolute; inset:0; background:
  radial-gradient(1200px 600px at 15% 10%, rgba(77,163,255,0.18), transparent 60%),
  radial-gradient(900px 600px at 85% 80%, rgba(103,209,255,0.14), transparent 60%),
  linear-gradient(180deg, #060719 0%, #050611 80%);
}
.bg .bg-layer.stars { position:absolute; inset:0; background-image: radial-gradient(circle at 20% 30%, rgba(255,255,255,0.08) 1px, transparent 1px), radial-gradient(circle at 70% 60%, rgba(255,255,255,0.07) 1px, transparent 1px); background-size: 120px 120px, 160px 160px; mix-blend-mode: screen; opacity: .25; }
.bg .bg-layer.grid { position:absolute; inset:0; background:
  linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
  linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
  background-size: 44px 44px; mask-image: radial-gradient(1000px 1000px at 50% 50%, black, transparent 70%);
}
.bg-ornament.orb { position:absolute; filter: blur(40px); opacity:.35; }
.bg-ornament.orb-a { width: 320px; height: 320px; background: radial-gradient(circle, rgba(77,163,255,0.8), rgba(77,163,255,0) 70%); top: 8%; left: 4%; }
.bg-ornament.orb-b { width: 420px; height: 420px; background: radial-gradient(circle, rgba(103,209,255,0.65), rgba(103,209,255,0) 70%); bottom: 8%; right: 6%; }

/* Top nav */
.topnav { position: fixed; top: 0; left: 0; right: 0; z-index: 50; background: linear-gradient(180deg, rgba(5,6,17,0.8), rgba(5,6,17,0.45)); backdrop-filter: saturate(160%) blur(10px); border-bottom: 1px solid rgba(255,255,255,0.08); padding-top: env(safe-area-inset-top); }
.nav-inner { display: flex; align-items: center; justify-content: space-between; max-width: 1280px; margin: 0 auto; padding: 10px 16px; }
.brand { display:flex; align-items: center; gap: 10px; min-width: 0; }
.logo-dot { width: 14px; height: 14px; border-radius: 50%; background: linear-gradient(135deg, var(--brand), var(--brand-2)); box-shadow: 0 0 0 3px rgba(77,163,255,0.15), 0 4px 18px rgba(77,163,255,0.45); display:inline-block; }
.nav-title { font-size: clamp(14px, 2.2vh, 16px); color: var(--ink); letter-spacing: .2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; opacity: .92; }
.nav-actions { display:flex; align-items:center; gap:10px; }
.btn { appearance: none; border: 1px solid var(--border); background: rgba(255,255,255,0.06); color: var(--ink); padding: 8px 12px; border-radius: 10px; font-size: 14px; cursor: pointer; transition: transform .2s ease, background .2s ease, border-color .2s ease; }
.btn:hover { transform: translateY(-1px); background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.25); }
.btn.primary { background: linear-gradient(135deg, rgba(77,163,255,0.25), rgba(103,209,255,0.2)); border: 1px solid rgba(103,209,255,0.45); box-shadow: var(--glow); }
.btn[disabled] { opacity: .6; cursor: not-allowed; transform: none; }

/* Deck container uses top offset padding so nav never overlaps content */
.deck { position: relative; z-index: 1; padding-top: var(--topOffset); scroll-snap-type: y mandatory; height: 100dvh; overflow-y: auto; overflow-x: hidden; }

/* Slides */
.slide { position: relative; min-height: calc(100dvh - var(--topOffset)); height: calc(100dvh - var(--topOffset)); padding: clamp(18px, 3vh, 32px) clamp(18px, 3vw, 40px); scroll-snap-align: start; scroll-margin-top: var(--topOffset); display:flex; align-items: center; justify-content: center; }
.slide .frame { width: min(1200px, 92vw); background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.04)); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: 0 10px 40px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.05); padding: clamp(18px, 4vh, 36px) clamp(18px, 4vw, 48px); position: relative; }
.frame::before { content: ""; position: absolute; left: 0; right: 0; top: 0; height: 34px; border-bottom: 1px solid rgba(255,255,255,0.08); background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0)); border-top-left-radius: var(--radius); border-top-right-radius: var(--radius); }
.frame .window-dots { position: absolute; left: 14px; top: 10px; display:flex; gap: 8px; }
.window-dots i { width: 10px; height: 10px; border-radius: 50%; display:inline-block; background: rgba(255,255,255,0.3); box-shadow: inset 0 0 0 2px rgba(0,0,0,0.25); }
.window-dots i:nth-child(1){ background: #ff6b6b; }
.window-dots i:nth-child(2){ background: #f7c948; }
.window-dots i:nth-child(3){ background: #2ecc71; }

h1, h2, h3, p { margin: 0 0 .6em 0; }
.hgroup { margin-bottom: clamp(8px, 1.5vh, 16px); }
.title { font-size: var(--h1); line-height: 1.04; letter-spacing: -0.5px; font-weight: 800; }
.sub { font-size: clamp(18px, 2.6vh, 24px); color: var(--muted); }
.h2 { font-size: var(--h2); font-weight: 750; line-height: 1.08; letter-spacing: -0.3px; }
.h3 { font-size: var(--h3); color: var(--muted); font-weight: 600; }

/* Gradient text with safe export fallback */
.grad { background: linear-gradient(135deg, #dfe9ff 0%, #67d1ff 40%, #4da3ff 100%); -webkit-background-clip: text; background-clip: text; color: transparent; }

/* Layouts */
.stack { display:flex; flex-direction: column; gap: clamp(10px, 2vh, 20px); }
.cols { display:grid; grid-template-columns: 1fr 1fr; gap: clamp(14px, 3vw, 32px); }
@media (max-width: 820px) { .cols { grid-template-columns: 1fr; } }

.bullets { list-style: none; margin: 0; padding: 0; display: grid; gap: clamp(8px, 1.4vh, 14px); }
.bullets li { position: relative; padding: 12px 14px 12px 44px; border: 1px solid var(--border); background: var(--card); border-radius: 12px; font-size: clamp(16px, 2.2vh, 19px); letter-spacing: .1px; }
.bullets li::before { content: ""; position: absolute; left: 14px; top: 50%; transform: translateY(-50%); width: 16px; height: 16px; border-radius: 6px; background: linear-gradient(135deg, var(--brand), var(--brand-2)); box-shadow: 0 4px 16px rgba(77,163,255,0.5); }

.kicker { text-transform: uppercase; letter-spacing: 1.2px; font-weight: 700; color: var(--muted); font-size: clamp(12px, 1.8vh, 13px); }

/* Animations */
@media (prefers-reduced-motion: no-preference) {
  [data-animate] { opacity: 0; transform: translateY(16px) scale(0.985); filter: blur(2px); transition: opacity .5s ease, transform .6s ease, filter .6s ease; transition-delay: calc(60ms * var(--i, 0)); }
  .slide.is-active [data-animate] { opacity: 1; transform: none; filter: none; }
}
@media (prefers-reduced-motion: reduce) {
  [data-animate] { opacity: 1 !important; transform: none !important; filter: none !important; transition: none !important; }
}

/* Loading */
.loading { height: 60vh; display:flex; gap: 14px; flex-direction: column; align-items: center; justify-content: center; opacity: .9; }
.spinner { width: 28px; height: 28px; border: 3px solid rgba(255,255,255,0.18); border-top-color: var(--brand); border-radius: 50%; animation: spin 1s linear infinite; }
.loading-text { color: var(--muted); font-size: 14px; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Error panel */
.error-panel { position: fixed; inset: 0; display: grid; place-items: center; background: radial-gradient(600px 400px at 50% 20%, rgba(77,163,255,0.12), transparent 70%); z-index: 100; }
.error-card { width: min(520px, 92vw); background: rgba(0,0,0,0.55); border: 1px solid rgba(255,255,255,0.18); border-radius: 14px; padding: 22px; box-shadow: 0 10px 40px rgba(0,0,0,0.45); }
.error-title { margin: 0 0 6px 0; font-size: 20px; }
.error-msg { margin: 0 0 14px 0; color: var(--muted); font-size: 14px; }

/* Progress rail */
.progress-rail { position: fixed; right: 10px; top: calc(var(--topOffset) + 12px); bottom: 12px; width: 4px; background: rgba(255,255,255,0.08); border-radius: 999px; z-index: 2; overflow: hidden; }
.progress-bar { position: absolute; left: 0; bottom: 0; width: 100%; height: 0%; background: linear-gradient(180deg, var(--brand), var(--brand-2)); box-shadow: 0 0 20px rgba(77,163,255,0.5); }

/* Title and closing centers */
.type-title .frame, .type-closing .frame { text-align: center; }
.type-title .title, .type-closing .title { letter-spacing: -0.8px; }
.type-title .sub, .type-closing .sub { margin-top: .4em; }

/* PDF Export special requirements */
body.exportingPdf [data-animate] { opacity:1 !important; transform:none !important; filter:none !important; transition:none !important; }
body.exportingPdf .grad { background:none !important; -webkit-background-clip:initial !important; background-clip:initial !important; color: rgba(255,255,255,.92) !important; }

#pdfStage { position:fixed; left:-10000px; top:0; width:1920px; height:1080px; overflow:hidden; background:#050611; z-index: 9999; }
#pdfStage .topnav, #pdfStage .progress-rail, #pdfStage .loading, #pdfStage .error-panel { display:none !important; }
#pdfStage .slide { width:1920px; height:1080px; padding: 90px 96px; scroll-snap-align: none; scroll-margin: 0; min-height: auto; }
#pdfStage .frame { width: 100%; height: 100%; display:flex; flex-direction: column; justify-content: center; }

/* Utility */
.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
.hidden { display:none !important; }
